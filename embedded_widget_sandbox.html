<!DOCTYPE html>
<html>
<head>
    <title>Embedded widget example</title>
    <link href="https://embeddings.preference-management.usercentrics-sandbox.eu/styles.css" rel="stylesheet"/>
</head>
<body>

TOKEN, WIDGET_ID and LANG parameters should be passed via URL: http://domain.com/embdded_widgets.html?TOKEN=yourTokenValue&LANG=yourLangValue&WIDGET_ID=yourWidgetIdValue

<p>

<div class="embedded-preference-widget" id="preferenceWidget"></div>

<script>
    // Функция для получения параметров из URL
    function getUrlParameter(name) {
        name = name.replace(/[\[]/, '\\[').replace(/[\]]/, '\\]');
        var regex = new RegExp('[\\?&]' + name + '=([^&#]*)');
        var results = regex.exec(location.search);
        return results === null ? '' : decodeURIComponent(results[1].replace(/\+/g, ' '));
    }

    // Получаем параметры из URL
    var token = getUrlParameter('TOKEN');
    var lang = getUrlParameter('LANG');
    var widgetId = getUrlParameter('WIDGET_ID');

    // Получаем элемент, в который будем вставлять параметры
    var widgetElement = document.getElementById('preferenceWidget');

    // Проверяем, что обязательные параметры присутствуют
    if (token && widgetId && widgetElement) {
        // Устанавливаем атрибуты элементу в соответствии с параметрами
        widgetElement.setAttribute('data-token', token);
        widgetElement.setAttribute('data-widgetid', widgetId);

        // Если параметр LANG передан, устанавливаем его
        if (lang) {
            widgetElement.setAttribute('data-language', lang);
        }
    } else {
        console.error('Не удалось получить все необходимые параметры из URL.');
    }
</script>

<script src="https://embeddings.preference-management.usercentrics-sandbox.eu/bundle.js"></script>
</body>
</html>
